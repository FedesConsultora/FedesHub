@use '../../../styles/variables' as *;

/* Drawer (perfil) – overlay & panel */
.pfWrap{ position:fixed; inset:0; z-index:1000; display:flex; pointer-events:none; opacity:0; transition:opacity .2s ease; color:$fh-text; }
.pfWrap.open{ pointer-events:auto; opacity:1 }
.pfWrap.closing{ opacity:0 }
.pfBackdrop{ position:absolute; inset:0; background: linear-gradient(180deg, rgba(8,12,18,.55), rgba(8,12,18,.8)); }

.pfPanel{
  position:relative; margin-left:auto; height:100%; width:min(980px, 100%);
  background:$fh-card; backdrop-filter: blur(18px);
  border-left:1px solid rgba(255,255,255,.08);
  box-shadow:$shadow-soft;
  display:flex; flex-direction:column;
  border-top-left-radius:$radius-2xl; border-bottom-left-radius:$radius-2xl;
}

.pfTopBar{
  padding:16px; border-bottom:1px solid rgba(255,255,255,.08);
  display:flex; gap:12px; align-items:flex-start; justify-content:space-between;
  .brand{
    .logo{ font-weight:900; font-size:22px; letter-spacing:.3px; color:#fff }
    .sub{ color:$fh-muted; margin-top:2px; font-size:12px }
  }
  .close{ border:0; background:transparent; color:inherit; font-size:22px; width:36px; height:36px; border-radius:10px; display:grid; place-items:center; cursor:pointer;
    &:hover{ background:rgba(255,255,255,.06) }
  }
}

.pfBody{ flex:1 1 auto; overflow:auto; padding:14px 16px; }

/* Encabezado del perfil */
.pfHeader{
  display:flex; align-items:center; gap:16px; margin-bottom:12px;
  .pfAvatar{ position:relative; width:56px; height:56px; flex:0 0 56px;
    .circle{ width:56px; height:56px; border-radius:50%; background:linear-gradient(135deg,#1b2735,#233548); display:grid; place-items:center; font-weight:900 }
    .ghost{ position:absolute; right:-6px; bottom:-6px; border-radius:10px; padding:6px 8px; border:1px solid rgba(255,255,255,.24); background: rgba(255,255,255,.06) }
  }
  .pfMeta .nm{ font-size:18px; font-weight:900 }
  .pfMeta .sub{ color:$fh-muted; font-size:12px }
  .pfActions{ margin-left:auto; display:flex; gap:10px; align-items:center; }
  .switchLbl{ display:flex; align-items:center; gap:8px; font-weight:700; input{ accent-color:$fh-primary } }
  .btn{ background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.16); padding:8px 12px; border-radius:12px; cursor:pointer; font-weight:800; letter-spacing:.2px; color:$fh-text;
    &:hover{ background: rgba(255,255,255,.1) }
  }
}

/* =======================  Tabs plegables (accordion)  ======================= */
.tabsGroup{ display:grid; gap:12px }

.fold{
  border-radius:$radius-2xl; background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.08); box-shadow:$shadow-soft; overflow:hidden;
  &.open .foldHead{ border-bottom:1px solid rgba(255,255,255,.08) }
}
.foldHead{
  display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px 14px; cursor:pointer;
  .foldT h3{ margin:0; font-size:16px }
  .foldT .sub{ color:$fh-muted; font-size:12px }
  .foldActions{ display:flex; align-items:center; gap:10px }
  .chev{ display:inline-flex; transition: transform .18s ease; }
}
.fold.open .chev{ transform: rotate(180deg) }
.foldBody{ padding:12px; }

/* =======================  UI base & formularios  ======================= */
.lbl{ display:block; margin:10px 0 6px; font-weight:700; font-size:13px }
.req{ color:#ff9080; margin-left:4px }
.muted{ color:$fh-muted }
.hint{ color:$fh-muted; margin:6px 2px 0; font-size:12px; line-height:1.4 }

.field{
  position:relative; display:grid; grid-template-columns:22px 1fr; align-items:center;
  gap:8px; padding:12px; border-radius:12px; margin-bottom:10px;
  border:1px solid rgba(255,255,255,.12); background:#0f141b;
  .ico{ opacity:.8; width:1em; height:1em; position:absolute; right:19px; top:14px }
  input, select, textarea{
    width:100%; background:none; color:$fh-text; border:0 !important; outline:none; padding:0; font-size:.98rem; min-height:22px;
    &::placeholder{ color: rgba(255,255,255,.45) }
  }
  &:focus-within{ border-color:$fh-primary; box-shadow:0 0 0 2px rgba($fh-primary,.3); background:#111823; }

  &.checkbox{ grid-template-columns:22px auto 1fr; input{width:auto; cursor:pointer} label{ margin:0; cursor:pointer; user-select:none } }
  &.filefield{
    .avatarPreview{ width:32px; height:32px; border-radius:6px; margin-right:8px; }
    input[type="file"]{
      font-size:.92rem;
      &::file-selector-button{
        margin-right:10px; border:1px solid rgba(255,255,255,.16);
        background: rgba(255,255,255,.06); border-radius:10px;
        padding:6px 10px; color:$fh-text; cursor:pointer; font-weight:800;
      }
    }
  }
}

.grid2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; @media (max-width:820px){ grid-template-columns:1fr } }
.grid7{ display:grid; grid-template-columns:repeat(7,1fr); gap:8px;
  @media (max-width:1020px){ grid-template-columns:repeat(3,1fr) }
  @media (max-width:560px){ grid-template-columns:repeat(2,1fr) }
}
.sep{ height:1px; background: rgba(255,255,255,.08); margin:12px 0; border-radius:1px }

.rowBetween{ display:flex; align-items:center; justify-content:space-between; gap:8px }
.rowEnd{ display:flex; align-items:center; justify-content:flex-end; gap:8px }

.btn{
  background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.16);
  padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:800; letter-spacing:.3px; color:$fh-text;
  &:hover{ background: rgba(255,255,255,.1) }
  &.danger{ border-color:#5a2d2d; background:#3a1f1f; color:#ffb4b4 }
}
.submit, .cta{
  background:$fh-primary; border:none; color:white; padding:.92rem 1rem; border-radius:12px; font-weight:800; letter-spacing:.3px;
  box-shadow:0 8px 20px rgba(68,113,141,.35);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease, opacity .2s ease;
  &:hover:not(:disabled){ transform:translateY(-1px); box-shadow:0 12px 26px rgba(68,113,141,.5); filter:brightness(1.04) }
  &:active:not(:disabled){ transform:translateY(0); box-shadow:0 6px 14px rgba(68,113,141,.3) }
  &:disabled{ opacity:.65; cursor:not-allowed; box-shadow:none }
}

.error{ color:#ffb4b4; border:1px solid #5a2d2d; background:#3a1f1f; padding:8px 10px; border-radius:12px }

/* Listas (bancos / emergencias) */
.list{ list-style:none; padding:0; margin:0; display:grid; gap:8px }
.rowBank, .rowEm{ display:flex; align-items:center; justify-content:space-between; gap:10px; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px; background:#0f141b; }
.col .nm{ font-weight:800 }
.col .sub{ color:$fh-muted }
.bankForm, .emForm{ display:grid; gap:10px; grid-template-columns:repeat(2, minmax(0,1fr)); @media (max-width:760px){ grid-template-columns:1fr } }
.field.chk{ flex-direction:row; align-items:center; gap:10px }
.pill{ padding:4px 8px; border-radius:999px; font-size:12px; border:1px solid rgba(255,255,255,.1); background:rgba(255,255,255,.06) }
.pill.ok{ background: rgba($fh-primary,.18); border-color: rgba($fh-primary,.35) }

/* Firma – vista previa */
.sigPrev{
  display:flex; align-items:center; justify-content:space-between; gap:14px;
  background:#0f141b; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px;
  .left{ display:flex; align-items:center; gap:10px }
  .svgWrap{
    background:#0b0f15; border:1px dashed rgba(255,255,255,.12); border-radius:10px; padding:6px; width:340px; height:150px;
    svg{ width:100%; height:100% }
  }
}

/* ====== helpers opcionales tipo modal (tu referencia original) ====== */
.ccModalWrap{ position: fixed; inset: 0; z-index: 1000; display:grid; place-items:center; padding:16px; color:$fh-text; }
.ccBackdrop{ position:absolute; inset:0; background: linear-gradient(180deg, rgba(8,12,18,.55), rgba(8,12,18,.8)); }
.ccCard{
  position: relative; z-index:1; width: min(840px, 96vw);
  max-height: 92vh; @supports (height: 100dvh){ max-height: 92dvh; }
  overflow:hidden; display:flex; flex-direction:column;
  background: $fh-card; backdrop-filter: blur(18px);
  border: 1px solid rgba(255,255,255,.08); border-radius: $radius-2xl; box-shadow: $shadow-soft;
}
.ccHeader{
  padding: 16px; border-bottom:1px solid rgba(255,255,255,.08);
  display:flex; gap:12px; align-items:flex-start; justify-content:space-between;
  .brand{
    .logo{ font-weight:900; font-size:22px; letter-spacing:.3px; color:#fff }
    .subtitle{ color:$fh-muted; margin-top:2px; font-size:12px }
  }
  .close{ border:0; background:transparent; color:inherit; font-size:22px; width:36px; height:36px; border-radius:10px; display:grid; place-items:center; cursor:pointer;
    &:hover{ background: rgba(255,255,255,.06) }
  }
}
.ccBody{ flex:1 1 auto; overflow:auto; padding:14px 16px }

/* presencia (como en la ref) */
.presenceDot[data-status="online"] { background:#31c48d }
.presenceDot[data-status="away"]   { background:#f6ad55 }
.presenceDot[data-status="dnd"]    { background:#ef4444 }
.presenceDot[data-status="offline"]{ background:#6b7280 }
